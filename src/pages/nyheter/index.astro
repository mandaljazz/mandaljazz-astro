---
import { getCollection } from "astro:content";
import BlogPostCard from "../../components/BlogPostCard.astro";
import Layout from "../../layouts/Layout.astro";

const allBlogPosts = await getCollection("nyheter");
const articleList = allBlogPosts
  .filter((post) => !post.data.hide)
  .sort((a, b) => b.data.createdAt.getTime() - a.data.createdAt.getTime());
---

<Layout title="Nyheter // Mandaljazz" description="Nyheter fra Mandaljazz">
  <main class="px-4 py-24 sm:px-12 sm:py-40 md:px-24 lg:px-32">
    <div class="mx-auto max-w-5xl space-y-16">
      <h1 class="text-5xl md:text-7xl">Nyheter</h1>
      <ul role="list" class="grid grid-cols-1 gap-x-6 gap-y-12 lg:grid-cols-2">
        {
          [...articleList, ...articleList, ...articleList].map((article) => {
            const {
              data: { title, ingress, image },
              slug,
            } = article;
            return (
              <BlogPostCard
                title={title}
                ingress={ingress}
                href={`/nyheter/${slug}`}
                image={image}
              />
            );
          })
        }
      </ul>
    </div>
  </main>
</Layout>
